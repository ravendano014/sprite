<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Rick & Morty with animated sprites</title>

  <style>
    /* element who's going to receive this class will be mirrored */
    .flip {
      transform: scaleX(-1);
    }

    /* sprite tile dimensions */
    /* rick */
    .rick,
    .fireball {
      position: absolute;
      bottom: 80px;
      margin-left: 150px;
      width: 70px;
      height: 80px;
      background-image: url("https://raw.githubusercontent.com/ravendano014/sprite/refs/heads/main/rick.png");
      /* other sprites preloading */
    }

    .rick:before,
    .fireball:before {
      content: "";
      background: url("https://raw.githubusercontent.com/ravendano014/sprite/refs/heads/main/rick-tatsumaki-senpuu-kyaku.png") no-repeat;
    }

    .rick:after,
    .fireball:after {
      content: "";
      background: url("https://raw.githubusercontent.com/ravendano014/sprite/refs/heads/main/rick-shoryurken.png") no-repeat;
    }

    /* rick's fireball */
    .fireball {
      position: absolute;
      left: 100%;
      bottom: 0px;
      margin-left: 0;
      /* default margin-left */
      background-position: 140px 320px;
      /* default background position */
      transition: margin 8s linear;
      /* triggering the movement with this class */
      -webkit-animation: fireball steps(2) 0.15s infinite;
      animation: fireball steps(2) 0.15s infinite;
    }

    .fireball:before {
      left: 25px;
      right: 25px;
    }

    .fireball.moving {
      margin-left: 4000px;
    }

    @-webkit-keyframes fireball {
      from {
        background-position: 0px -320px;
      }

      to {
        background-position: -140px -320px;
      }
    }

    @keyframes fireball {
      from {
        background-position: 0px -320px;
      }

      to {
        background-position: -140px -320px;
      }
    }

    /* rick's fireball impact explosion */
    .explode {
      -webkit-animation: explode steps(4) 0.5s 1;
      animation: explode steps(4) 0.5s 1;
    }

    @-webkit-keyframes explode {
      from {
        background-position: 0px -400px;
      }

      to {
        background-position: -280px -400px;
      }
    }

    @keyframes explode {
      from {
        background-position: 0px -400px;
      }

      to {
        background-position: -280px -400px;
      }
    }

    /* stance */
    .stance {
      -webkit-animation: stance steps(4) 0.5s infinite;
      animation: stance steps(4) 0.5s infinite;
    }

    @-webkit-keyframes stance {
      from {
        background-position: 0px -80px;
      }

      to {
        background-position: -280px -80px;
      }
    }

    @keyframes stance {
      from {
        background-position: 0px -80px;
      }

      to {
        background-position: -280px -80px;
      }
    }

    /* hadorick - must be declared AFTER .stance */
    .hadorick {
      -webkit-animation: hadorick steps(4) 0.5s infinite;
      animation: hadorick steps(4) 0.5s infinite;
    }

    @-webkit-keyframes hadorick {
      from {
        background-position: 0px 0px;
      }

      to {
        background-position: -280px 0px;
      }
    }

    @keyframes hadorick {
      from {
        background-position: 0px 0px;
      }

      to {
        background-position: -280px 0px;
      }
    }

    /* punch */
    .punch {
      -webkit-animation: punch steps(3) 0.15s infinite;
      animation: punch steps(3) 0.15s infinite;
    }

    @-webkit-keyframes punch {
      from {
        background-position: 0px -160px;
      }

      to {
        background-position: -210px -160px;
      }
    }

    @keyframes punch {
      from {
        background-position: 0px -160px;
      }

      to {
        background-position: -210px -160px;
      }
    }

    /* walking */
    .walk {
      -webkit-animation: walk steps(5) 0.5s infinite;
      animation: walk steps(5) 0.5s infinite;
    }

    @-webkit-keyframes walk {
      from {
        background-position: 0px -240px;
      }

      to {
        background-position: -350px -240px;
      }
    }

    @keyframes walk {
      from {
        background-position: 0px -240px;
      }

      to {
        background-position: -350px -240px;
      }
    }

    /* kick */
    .kick {
      -webkit-animation: kick steps(5) 0.5s infinite;
      animation: kick steps(5) 0.5s infinite;
    }

    @-webkit-keyframes kick {
      from {
        background-position: 0px -480px;
      }

      to {
        background-position: -350px -480px;
      }
    }

    @keyframes kick {
      from {
        background-position: 0px -480px;
      }

      to {
        background-position: -350px -480px;
      }
    }

    /* reverse kick */
    .reversekick {
      -webkit-animation: reversekick steps(5) 0.5s infinite;
      animation: reversekick steps(5) 0.5s infinite;
    }

    @-webkit-keyframes reversekick {
      from {
        background-position: 0px -560px;
      }

      to {
        background-position: -350px -560px;
      }
    }

    @keyframes reversekick {
      from {
        background-position: 0px -560px;
      }

      to {
        background-position: -350px -560px;
      }
    }

    /* kneel down */
    .kneel {
      -webkit-animation: kneel steps(1) 0.2s infinite;
      animation: kneel steps(1) 0.2s infinite;
    }

    @-webkit-keyframes kneel {
      from {
        background-position: 0px -720px;
      }

      to {
        background-position: -70px -720px;
      }
    }

    @keyframes kneel {
      from {
        background-position: 0px -720px;
      }

      to {
        background-position: -70px -720px;
      }
    }

    /* jump */
    .jump {
      transition: bottom 0.5s cubic-bezier(0.99, 0.005, 0, 0.42);
      bottom: 225px;
      -webkit-animation: jump steps(7) 1s infinite;
      animation: jump steps(7) 1s infinite;
    }

    .jump.down {
      bottom: 112px;
    }

    @-webkit-keyframes jump {
      from {
        background-position: 0px -640px;
      }

      to {
        background-position: -490px -640px;
      }
    }

    @keyframes jump {
      from {
        background-position: 0px -640px;
      }

      to {
        background-position: -490px -640px;
      }
    }

    /* shoryurick */
    .shoryurick {
      height: 110px;
      background-image: url("https://raw.githubusercontent.com/ravendano014/sprite/refs/heads/main/rick-shoryuken.png");
      transition: bottom 0.5s cubic-bezier(0.99, 0.005, 0, 0.42);
      bottom: 225px;
      -webkit-animation: shoryurick steps(7) 1s infinite;
      animation: shoryurick steps(7) 1s infinite;
    }

    .shoryurick.down {
      bottom: 112px;
    }

    @-webkit-keyframes shoryurick {
      from {
        background-position: 0px 0px;
      }

      to {
        background-position: -490px 0px;
      }
    }

    @keyframes shoryurick {
      from {
        background-position: 0px 0px;
      }

      to {
        background-position: -490px 0px;
      }
    }

    /* tatsumaki senpuu kyaku */
    .tatsumaki {
      height: 110px;
      background-image: url("https://raw.githubusercontent.com/ravendano014/sprite/refs/heads/main/rick-tatsumaki-senpuu-kyaku.png");
      transition: bottom 0.2s cubic-bezier(0.99, 0.005, 0, 0.42);
      bottom: 132px;
      -webkit-animation: tatsumaki steps(13) 2s infinite;
      animation: tatsumaki steps(13) 2s infinite;
    }

    .tatsumaki.down {
      bottom: 112px;
    }

    @-webkit-keyframes tatsumaki {
      from {
        background-position: 0px 0px;
      }

      to {
        background-position: -910px 0px;
      }
    }

    @keyframes tatsumaki {
      from {
        background-position: 0px 0px;
      }

      to {
        background-position: -910px 0px;
      }
    }

    /* Layout improvements */
    .container {
      display: flex;
      flex-wrap: wrap;
      max-width: 800px;
      margin: 0 auto;
      padding: 20px;
      gap: 20px;
    }

    .commands {
      flex: 1;
      min-width: 250px;
      padding: 15px;
      background: #f5f5f5;
      border-radius: 8px;
      box-shadow: 0 2px 5px rgba(0,0,0,0.1);
    }

    .commands h1 {
      margin-top: 0;
      font-size: 16px;
      color: #333;
      border-bottom: 1px solid #ddd;
      padding-bottom: 10px;
    }

    .command-group {
      margin-bottom: 15px;
    }

    .command-group h2 {
      font-size: 14px;
      margin: 10px 0 5px 0;
      color: #555;
    }

    .commands button {
      background: #4CAF50;
      color: white;
      border: none;
      padding: 6px 10px;
      margin: 3px;
      border-radius: 4px;
      cursor: pointer;
      font-size: 13px;
      transition: background 0.2s;
      min-width: 50px;
    }

    .commands button:hover {
      background: #45a049;
    }

    .commands button:active {
      background: #3e8e41;
    }

    .commands .arrow-btn {
      padding: 6px 12px;
      font-size: 14px;
    }

    .keyboard-hint {
      font-size: 11px;
      color: #777;
      margin-left: 5px;
    }

    .stage {
      flex: 2;
      min-width: 300px;
      height: 330px;
      background: url("https://raw.githubusercontent.com/ravendano014/sprite/refs/heads/main/bg2.jpg") no-repeat 0px -100px;
      background-size: cover;
      border-radius: 8px;
      overflow: hidden;
      position: relative;
    }

    body {
      margin: 0;
      padding: 0;
      font-family: Arial, sans-serif;
      background: #f0f0f0;
    }

    @media (max-width: 600px) {
      .container {
        flex-direction: column;
      }
      
      .stage {
        min-width: 100%;
        height: 250px;
      }
      
      .commands {
        margin-left: 0;
        margin-top: 15px;
      }
    }
  </style>
</head>

<body translate="no">
  <div class="container">
    <div class="stage">
      <div class="rick stance"></div>
    </div>

    <div class="commands">
      <h1>Rick Animation Controls</h1>
      
      <div class="command-group">
        <h2>Basic Attacks</h2>
        <button id="a">Punch (A)</button>
        <button id="z">Kick (Z)</button>
        <button id="e">Reverse Kick (E)</button>
      </div>
      
      <div class="command-group">
        <h2>Special Moves</h2>
        <button id="q">Tatsumaki (Q)</button>
        <button id="s">Hadorick (S)</button>
        <button id="d">Shoryurick (D)</button>
      </div>
      
      <div class="command-group">
        <h2>Movement</h2>
        <button id="up" class="arrow-btn">Jump (▲)</button><br>
        <button id="left" class="arrow-btn">Walk Left (◀)</button>
        <button id="right" class="arrow-btn">Walk Right (►)</button><br>
        <button id="down" class="arrow-btn">Kneel (▼)</button>
      </div>
    </div>
  </div>

  <script>
    var rick = document.querySelector('.rick');
    var rickPos;

    var punch = function () {
      rick.classList.add('punch');
      setTimeout(function () {
        rick.classList.remove('punch');
      }, 150);
    };
    var kick = function () {
      rick.classList.add('kick');
      setTimeout(function () {
        rick.classList.remove('kick');
      }, 500);
    };
    var rkick = function () {
      rick.classList.add('reversekick');
      setTimeout(function () {
        rick.classList.remove('reversekick');
      }, 500);
    };
    var tatsumaki = function () {
      rick.classList.add('tatsumaki');
      setTimeout(function () {
        rick.classList.add('down');
      }, 1500);
      setTimeout(function () {
        rick.classList.remove('tatsumaki', 'down');
      }, 2000);
    };
    var hadorick = function () {
      rick.classList.add('hadorick');
      setTimeout(function () {
        rick.classList.remove('hadorick');
      }, 500);
      setTimeout(function () {
        var fireball = document.createElement('div');
        fireball.className = 'fireball';
        rick.appendChild(fireball);

        var fireballPos;
        var isFireballColision = function () {
          fireballPos = fireball.getBoundingClientRect();
          return fireballPos.left + 75 > window.innerWidth ? true : false;
        };

        var explodeIfColision = setInterval(function () {
          if (isFireballColision()) {
            fireball.classList.add('explode');
            fireball.classList.remove('moving');
            var currentMarginLeft = parseInt(fireball.style.marginLeft || '0');
            fireball.style.marginLeft = (currentMarginLeft + 22) + 'px';
            clearInterval(explodeIfColision);
            setTimeout(function () {
              fireball.remove();
            }, 500);
          }
        }, 50);

        setTimeout(function () {
          fireball.classList.add('moving');
        }, 20);

        setTimeout(function () {
          fireball.remove();
          clearInterval(explodeIfColision);
        }, 3020);

      }, 250);
    };
    var shoryurick = function () {
      rick.classList.add('shoryurick');
      setTimeout(function () {
        rick.classList.add('down');
      }, 500);
      setTimeout(function () {
        rick.classList.remove('shoryurick', 'down');
      }, 1000);
    };
    var jump = function () {
      rick.classList.add('jump');
      setTimeout(function () {
        rick.classList.add('down');
      }, 500);
      setTimeout(function () {
        rick.classList.remove('jump', 'down');
      }, 1000);
    };
    var kneel = function () {
      rick.classList.add('kneel');
    };
    var walkLeft = function () {
      rick.classList.add('walk');
      var currentMarginLeft = parseInt(rick.style.marginLeft || '150');
      rick.style.marginLeft = (currentMarginLeft - 10) + 'px';
    };
    var walkRight = function () {
      rick.classList.add('walk');
      var currentMarginLeft = parseInt(rick.style.marginLeft || '150');
      rick.style.marginLeft = (currentMarginLeft + 10) + 'px';
    };

    // on click events
    document.getElementById('a').addEventListener('click', punch);
    document.getElementById('z').addEventListener('click', kick);
    document.getElementById('e').addEventListener('click', rkick);
    document.getElementById('q').addEventListener('click', tatsumaki);
    document.getElementById('s').addEventListener('click', hadorick);
    document.getElementById('d').addEventListener('click', shoryurick);
    document.getElementById('up').addEventListener('click', jump);
    document.getElementById('down').addEventListener('mousedown', kneel);
    document.getElementById('down').addEventListener('mouseup', function () {
      rick.classList.remove('kneel');
    });
    document.getElementById('left').addEventListener('mousedown', walkLeft);
    document.getElementById('left').addEventListener('mouseup', function () {
      rick.classList.remove('walk');
    });
    document.getElementById('right').addEventListener('mousedown', walkRight);
    document.getElementById('right').addEventListener('mouseup', function () {
      rick.classList.remove('walk');
    });

    // on keydown events
    document.addEventListener('keydown', function (e) {
      // s - hadorick
      if (e.keyCode == 83 &&
        !rick.classList.contains('tatsumaki') &&
        !rick.classList.contains('shoryurick') &&
        !rick.classList.contains('hadorick') &&
        !rick.classList.contains('punch') &&
        !rick.classList.contains('kick') &&
        !rick.classList.contains('reversekick')) {
        hadorick();
      }

      // d - shoryurick
      if (e.keyCode == 68 &&
        !rick.classList.contains('tatsumaki') &&
        !rick.classList.contains('shoryurick') &&
        !rick.classList.contains('hadorick') &&
        !rick.classList.contains('punch') &&
        !rick.classList.contains('kick') &&
        !rick.classList.contains('reversekick') &&
        !rick.classList.contains('jump')) {
        shoryurick();
      }

      // q - tatsumaki senpuu kyaku
      if (e.keyCode == 81 &&
        !rick.classList.contains('tatsumaki') &&
        !rick.classList.contains('shoryurick') &&
        !rick.classList.contains('hadorick') &&
        !rick.classList.contains('punch') &&
        !rick.classList.contains('kick') &&
        !rick.classList.contains('reversekick') &&
        !rick.classList.contains('jump')) {
        tatsumaki();
      }

      // a - punch
      if (e.keyCode == 65 &&
        !rick.classList.contains('punch') &&
        !rick.classList.contains('hadorick') &&
        !rick.classList.contains('shoryurick') &&
        !rick.classList.contains('tatsumaki')) {
        punch();
      }

      // z - kick
      if (e.keyCode == 90 &&
        !rick.classList.contains('kick') &&
        !rick.classList.contains('hadorick') &&
        !rick.classList.contains('shoryurick') &&
        !rick.classList.contains('tatsumaki')) {
        kick();
      }

      // e - reverse kick
      if (e.keyCode == 69 &&
        !rick.classList.contains('reversekick') &&
        !rick.classList.contains('kick') &&
        !rick.classList.contains('hadorick') &&
        !rick.classList.contains('shoryurick') &&
        !rick.classList.contains('tatsumaki')) {
        rkick();
      }

      // up - jump
      if (e.keyCode == 38 &&
        !rick.classList.contains('jump') &&
        !rick.classList.contains('reversekick') &&
        !rick.classList.contains('kick') &&
        !rick.classList.contains('hadorick') &&
        !rick.classList.contains('shoryurick') &&
        !rick.classList.contains('tatsumaki')) {
        jump();
      }

      // down - kneel
      if (e.keyCode == 40 &&
        !rick.classList.contains('kneel') &&
        !rick.classList.contains('jump') &&
        !rick.classList.contains('reversekick') &&
        !rick.classList.contains('kick') &&
        !rick.classList.contains('hadorick') &&
        !rick.classList.contains('shoryurick') &&
        !rick.classList.contains('tatsumaki')) {
        kneel();
      }

      // ←← →→ walking
      if (e.keyCode == 37) {
        walkLeft();
      }
      if (e.keyCode == 39) {
        walkRight();
      }
    });

    document.addEventListener('keyup', function (e) {
      if (e.keyCode == 37 || e.keyCode == 39) {
        rick.classList.remove('walk');
      }
      if (e.keyCode == 40) {
        rick.classList.remove('kneel');
      }
    });
  </script>
</body>
</html>
